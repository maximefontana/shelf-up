<!-- user profile details tab -->
<div class="user-show-container">
  <!-- tabs -->
  <div class="tabs">
    <a href="#" class="tab tab-first active">Personal</a>
    <a href="#" class="tab tab-second">Pending Shelfs</a>
    <a href="#" class="tab tab-third">Current Shelfs</a>
    <a href="#" class="tab tab-last">Messages</a>
  </div>

  <!-- user personal details tab -->
  <div class="user-show-box personal-details">
    <div class="user-show-avatar">
      <% if @user.photo %>
      <%= cl_image_tag @user.photo,
      width: 130, height: 130, crop: :thumb, gravity: :face, style:"border-radius:50%;"%>
      <% end %>
    </div>

    <div class="user-show-name">
      <%= @user.username.capitalize %>
    </div>

    <div class="user-show-edit-btn">
      <% if @user == current_user %>
      <%= link_to edit_user_registration_path(@user) do %>
      Edit Profile
      <% end %>
      <% end %>
    </div>

    <div class="user-show-details">
      <div>Email: <%= @user.email %></div>
      <div>Phone: +31 06123456</div>
      <div>Web: www.BadAssBrew.com</div>
      <div>** I Think we need more info here? **</div>
    </div>
  </div>

<!-- pending shelves tab -->
  <div class="user-show-box pending-bookings hidden">
    <div class="user-show-pending-bookings">
    <% @user.bookings.each do |booking| %>
    <% if booking.status == 'Pending' %>
      <div><%= booking.name %> </div>
      <% end %>
    <% end %>
    </div>
    <%= link_to "Back", stores_path, class: "btn btn-primary" %>
  </div>

  <!-- current shelves tab -->
  <div class="user-show-box current-bookings hidden">
    <div class="user-show-current-bookings">

      <% @user.bookings.each do |booking| %>
      <% if booking.status != 'Pending' %>
        <div><%= booking.name %> </div>
      <% end %>
      <% end %>
    </div>
    <%= link_to "Back", stores_path, class: "btn btn-primary" %>
  </div>

<!-- messages tab -->
  <div class="user-show-box messages hidden">

  </div>



</div>







<!-- owner details and stores -->
  <% if @user.owner && @user.stores.empty? %>
  <h3 class="btn btn-danger">You haven't added a Store yet</h3>
  <% elsif @user.owner && !@user.stores.empty? %>
  <% @user.stores.each do |store| %>
  <h3><%= link_to store.name, store_path(store) %></h3>
  <% end %>
  <% end %>

  <% if @user.owner %>
  <h3><%= link_to "Add a New Store", new_store_path, class: "btn btn-primary" %></h3>
  <% end %>

  <% if @user.owner %>
  <h3>Bookings:</h3>
  <% @user.stores.each do |store| %>
  <% store.bookings.each do |booking| %>
  <p>Store: <%= store.name %></p>
  <p>Category: <%= booking.category %></p>
  <p>Total Price: â‚¬<%= booking.total_price %></p>
  <% if booking.status == "Pending" && policy(booking).update? %>
  <%= form_for(booking, method: :put) do |f| %>
  <%= f.hidden_field :status, value: "Accepted" %>
  <%= f.submit "Accept", class: "btn btn-primary" %>
  <% end %>
  <%= form_for(booking, method: :put) do |f| %>
  <%= f.hidden_field :status, value: "Declined" %>
  <%= f.submit "Decline", class: "btn-primary" %>
  <% end %>
  <% else %>
  <p>Status: <%= booking.status %></p>
  <% end %>
  <% end %>
  <% end %>
  <% end %>






